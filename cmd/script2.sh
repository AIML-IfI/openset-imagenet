#!/bin/bash
# CUDA_VISIBLE_DEVICES=2 nice -n 10 python3 train_adv.py --exp_name e1n_a0_w1_l1_t5_x0_e0_af --loss entropic --output_dir runs/e1n_a0_w1_l1_t5_x0_e0_af --train_file data/p1/train.csv --val_file data/p1/validation.csv -al 0 -wl 1 -lr 0.001 -t 0.5 -xi 0 -ep 100 -e 0 -bs 64 -wk 5 --seed 343443 -p 0 --resume runs/e1n_a0_w1_l1_t5_x0_e0_af/e1n_a0_w1_l1_t5_x0_e0_af_curr.pth | tee runs/e1n_a0_w1_l1_t5_x0_e0_af/e1n_a0_w1_l1_t5_x0_e0_af_cont.log
# CUDA_VISIBLE_DEVICES=2 python3 evaluate.py --exp_name e1n_a0_w1_l1_t5_x0_e0_af_best --output_dir runs/e1n_a0_w1_l1_t5_x0_e0_af --checkpoint runs/e1n_a0_w1_l1_t5_x0_e0_af/e1n_a0_w1_l1_t5_x0_e0_af_best.pth --val_file data/p1/validation.csv --test_file data/p1/test.csv --loss entropic
# CUDA_VISIBLE_DEVICES=2 python3 evaluate.py --exp_name o2n_a0.01_w0.1_l0.1_t5_x10_e2_at_FT2A_ep20 --output_dir runs/o2n_a0.01_w0.1_l0.1_t5_x10_e2_at_FT2A --checkpoint runs/o2n_a0.01_w0.1_l0.1_t5_x10_e2_at_FT2A/o2n_a0.01_w0.1_l0.1_t5_x10_e2_at_FT2A_ep20.pth --val_file data/p2/validation.csv --test_file data/p2/test.csv --loss objectosphere
# CUDA_VISIBLE_DEVICES=2 python3 evaluate.py --exp_name o2n_a0.01_w0.1_l0.1_t5_x10_e2_at_FT2A_ep40 --output_dir runs/o2n_a0.01_w0.1_l0.1_t5_x10_e2_at_FT2A --checkpoint runs/o2n_a0.01_w0.1_l0.1_t5_x10_e2_at_FT2A/o2n_a0.01_w0.1_l0.1_t5_x10_e2_at_FT2A_curr.pth --val_file data/p2/validation.csv --test_file data/p2/test.csv --loss objectosphere
# CUDA_VISIBLE_DEVICES=2 python3 evaluate.py --exp_name o2n_a0.01_w0.1_l0.1_t5_x10_e5_at_FT2B_ep20 --output_dir runs/o2n_a0.01_w0.1_l0.1_t5_x10_e5_at_FT2B --checkpoint runs/o2n_a0.01_w0.1_l0.1_t5_x10_e5_at_FT2B/o2n_a0.01_w0.1_l0.1_t5_x10_e5_at_FT2B_ep20.pth --val_file data/p2/validation.csv --test_file data/p2/test.csv --loss objectosphere
# CUDA_VISIBLE_DEVICES=2 python3 evaluate.py --exp_name o2n_a0.01_w0.1_l0.1_t5_x10_e5_at_FT2B_ep40 --output_dir runs/o2n_a0.01_w0.1_l0.1_t5_x10_e5_at_FT2B --checkpoint runs/o2n_a0.01_w0.1_l0.1_t5_x10_e5_at_FT2B/o2n_a0.01_w0.1_l0.1_t5_x10_e5_at_FT2B_curr.pth --val_file data/p2/validation.csv --test_file data/p2/test.csv --loss objectosphere
# CUDA_VISIBLE_DEVICES=2 python3 evaluate.py --exp_name o2n_a0.01_w0.1_l0.1_t5_x10_e7_at_FT2C_ep20 --output_dir runs/o2n_a0.01_w0.1_l0.1_t5_x10_e7_at_FT2C --checkpoint runs/o2n_a0.01_w0.1_l0.1_t5_x10_e7_at_FT2C/o2n_a0.01_w0.1_l0.1_t5_x10_e7_at_FT2C_ep20.pth --val_file data/p2/validation.csv --test_file data/p2/test.csv --loss objectosphere
# CUDA_VISIBLE_DEVICES=2 python3 evaluate.py --exp_name o2n_a0.01_w0.1_l0.1_t5_x10_e7_at_FT2C_ep40 --output_dir runs/o2n_a0.01_w0.1_l0.1_t5_x10_e7_at_FT2C --checkpoint runs/o2n_a0.01_w0.1_l0.1_t5_x10_e7_at_FT2C/o2n_a0.01_w0.1_l0.1_t5_x10_e7_at_FT2C_curr.pth --val_file data/p2/validation.csv --test_file data/p2/test.csv --loss objectosphere
# CUDA_VISIBLE_DEVICES=2 python3 evaluate.py --exp_name o2n_a0.01_w0.1_l0.1_t5_x10_e8_at_mu0.5_wt10_FT2D_ep20 --output_dir runs/o2n_a0.01_w0.1_l0.1_t5_x10_e8_at_mu0.5_wt10_FT2D --checkpoint runs/o2n_a0.01_w0.1_l0.1_t5_x10_e8_at_mu0.5_wt10_FT2D/o2n_a0.01_w0.1_l0.1_t5_x10_e8_at_mu0.5_wt10_FT2D_ep20.pth --val_file data/p2/validation.csv --test_file data/p2/test.csv --loss objectosphere
# CUDA_VISIBLE_DEVICES=2 python3 evaluate.py --exp_name o2n_a0.01_w0.1_l0.1_t5_x10_e8_at_mu0.5_wt10_FT2D_ep40 --output_dir runs/o2n_a0.01_w0.1_l0.1_t5_x10_e8_at_mu0.5_wt10_FT2D --checkpoint runs/o2n_a0.01_w0.1_l0.1_t5_x10_e8_at_mu0.5_wt10_FT2D/o2n_a0.01_w0.1_l0.1_t5_x10_e8_at_mu0.5_wt10_FT2D_curr.pth --val_file data/p2/validation.csv --test_file data/p2/test.csv --loss objectosphere
# CUDA_VISIBLE_DEVICES=2 nice -n 19 python3 train.py exp_name=e1n_w1_l1_e5_adam_d40_g0.3_full_FEA checkpoint=runs/e1n_a0_w1_l1_t5_x0_e0_af/e1n_a0_w1_l1_t5_x0_e0_af_curr.pth train_mode=finetune data.train_file=p1/train_kkp1.csv data.val_file=p1/validation.csv data.test_file=p1/test.csv loss.type=entropic loss.w=1 opt.type=adam opt.lr=0.001 opt.decay=40 opt.gamma=0.3 batch_size=64 epochs=100 adv.who=fgsm adv.epsilon=0.5 adv.mode=full
# CUDA_VISIBLE_DEVICES=2 nice -n 19 python3 train.py exp_name=e1n_w1_l0.1_e2_sgd_filter_ep40_FSA checkpoint=outputs/s1n_l1_e0_adam_d40_g0.3/s1n_l1_e0_adam_d40_g0.3_curr.pth train_mode=finetune data.train_file=p1/train_kkp1.csv data.val_file=p1/validation.csv data.test_file=p1/test.csv loss.type=entropic loss.w=1 opt.type=sgd opt.lr=0.0001 batch_size=64 epochs=40 adv.who=fgsm adv.epsilon=0.2 adv.mode=filter
# CUDA_VISIBLE_DEVICES=2 nice -n 19 python3 train_single.py exp_name=e1n_w1_l0.1_e2_sgd_filter_ep40_FSA checkpoint=outputs/s1n_l1_e0_adam_d40_g0.3/s1n_l1_e0_adam_d40_g0.3_curr.pth train_mode=finetune data.train_file=p1/train_kkp1.csv data.val_file=p1/validation.csv data.test_file=p1/test.csv loss.type=entropic loss.w=1 opt.type=sgd opt.lr=0.0001 batch_size=64 epochs=28 adv.who=fgsm adv.epsilon=0.2 adv.mode=filter workers=12
# CUDA_VISIBLE_DEVICES=2 nice -n 19 python3 train.py exp_name=o3n_a0.1_w0.1_l0.1_e5_adam_d30_g0.1_full_ep40_FORN checkpoint=outputs/o3n_a0.01_w0.1_l1_e0_adam_d40_g0.3/o3n_a0.01_w0.1_l1_e0_adam_d40_g0.3_curr.pth train_mode=finetune data.train_file=p3/train_kkp3.csv data.val_file=p3/validation.csv data.test_file=p3/test.csv loss.type=objectosphere loss.w=0.1 loss.xi=10 loss.alpha=0.1 opt.type=adam opt.lr=0.0001 opt.decay=30 opt.gamma=0.1 batch_size=64 epochs=40 adv.who=random adv.epsilon=0.5 adv.mode=full workers=12
# CUDA_VISIBLE_DEVICES=2 nice -n 19 python3 train.py exp_name=o3n_a0.1_w0.1_l0.1_e5_adam_d30_g0.1_full_ep40_FOA checkpoint=outputs/o3n_a0.01_w0.1_l1_e0_adam_d40_g0.3/o3n_a0.01_w0.1_l1_e0_adam_d40_g0.3_curr.pth train_mode=finetune data.train_file=p3/train_kkp3.csv data.val_file=p3/validation.csv data.test_file=p3/test.csv loss.type=objectosphere loss.w=0.1 loss.xi=10 loss.alpha=0.1 opt.type=adam opt.lr=0.0001 opt.decay=30 opt.gamma=0.1 batch_size=64 epochs=40 adv.who=fgsm adv.epsilon=0.5 adv.mode=full workers=8
# CUDA_VISIBLE_DEVICES=2 nice -n 0 python3 train.py exp_name=o3n_a0.1_w0.1_l0.5_e1_sgd_d30_g0.1_filter_ep40_FOAU checkpoint=outputs/o3n_a0.01_w0.1_l1_e0_adam_d40_g0.3/o3n_a0.01_w0.1_l1_e0_adam_d40_g0.3_curr.pth train_mode=finetune data.train_file=p3/train.csv data.val_file=p3/validation.csv data.test_file=p3/test.csv loss.type=objectosphere loss.w=0.01 loss.xi=10 loss.alpha=0.1 opt.type=sgd opt.lr=0.0001 opt.decay=30 opt.gamma=0.1 batch_size=64 epochs=40 adv.who=fgsm adv.epsilon=0.1 adv.mode=filter workers=4

CUDA_VISIBLE_DEVICES=2 nice -n 19 python3 src/train.py exp_name=g1n_l1_e0_adam train_mode=train data.train_file=v1/p1_train.csv data.val_file=v1/p1_val.csv data.test_file=v1/p1_test.csv loss.type=softmaxGarbage opt.type=adam opt.lr=0.001 batch_size=64 epochs=100 workers=4 seed=42







